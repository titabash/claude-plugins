# Webサイトデザイン解析ガイド

このドキュメントは、既存のWebサイトからデザインシステムの要素を抽出する方法を説明します。

## WebFetchツールの使用

WebFetchツールを使って、サイトのHTMLとCSSを取得し、以下の要素を分析します。

## 解析すべき要素

### 1. カラーシステムの抽出

#### 探す場所
- **背景色**: `background-color`, `background`プロパティ
- **テキスト色**: `color`プロパティ
- **ボーダー色**: `border-color`, `border`プロパティ
- **ボタン色**: ボタン要素の背景色、ホバー状態
- **リンク色**: `a`要素の色

#### 抽出方法
1. サイト全体で使用されている色を収集
2. 使用頻度でソート
3. 最も使用されている色をプライマリカラーとする
4. 2番目に使用されている色をセカンダリカラーとする
5. グレースケールを特定（彩度が低い色）
6. 特定の用途の色を特定：
   - 緑系 → Success
   - 赤系 → Error
   - オレンジ/黄色系 → Warning
   - 青系 → Info

#### 注意点
- HEX、RGB、HSL形式をすべてHEXに統一
- 非常に似た色（色差が小さい）は統合
- アルファチャンネル（透明度）を持つ色は、背景色との合成後の色として計算

### 2. タイポグラフィの抽出

#### フォントファミリー
```css
/* 探すプロパティ */
font-family
```

**抽出内容**：
- 本文で使用されているフォント
- 見出しで使用されているフォント
- コードブロックで使用されているフォント（monospace）

#### フォントサイズ
```css
/* 探すプロパティ */
font-size
```

**抽出方法**：
1. サイト全体で使用されているフォントサイズを収集
2. 小さい順にソート
3. 階層的なスケールを特定
4. h1, h2, h3などの見出しサイズを特定

**一般的なパターン**：
```
本文: 14px-16px
H6: 16px-18px
H5: 18px-20px
H4: 20px-24px
H3: 24px-28px
H2: 28px-36px
H1: 36px-48px
```

#### フォントウェイト
```css
/* 探すプロパティ */
font-weight
```

**一般的な値**：
- 300: Light
- 400: Regular/Normal（本文）
- 500: Medium
- 600: Semi-bold（見出し）
- 700: Bold

#### 行間
```css
/* 探すプロパティ */
line-height
```

**一般的なパターン**：
- 見出し: 1.2-1.4
- 本文: 1.5-1.8

### 3. スペーシングの抽出

#### マージンとパディング
```css
/* 探すプロパティ */
margin, margin-top, margin-bottom, margin-left, margin-right
padding, padding-top, padding-bottom, padding-left, padding-right
```

**抽出方法**：
1. すべてのマージン・パディング値を収集
2. 使用頻度でソート
3. 基準単位（base unit）を特定：
   - 値を4で割り切れる → 4pxベース
   - 値を8で割り切れる → 8pxベース

#### グリッドシステム
```css
/* 探すプロパティ */
grid-template-columns
max-width（コンテナ）
```

**抽出内容**：
- カラム数（12カラムが一般的）
- ガター（gap）
- コンテナの最大幅

#### ブレークポイント
```css
/* 探すメディアクエリ */
@media (min-width: ...)
@media (max-width: ...)
```

**一般的なブレークポイント**：
- モバイル: 640px以下
- タブレット: 768px
- デスクトップ: 1024px
- ワイド: 1280px以上

### 4. UIコンポーネントの特定

#### ボタン
**探す要素**：
- `<button>`, `.btn`, `.button`などのクラス

**抽出内容**：
- サイズバリエーション（高さ、パディング）
- カラーバリエーション（primary, secondary, など）
- ボーダー半径
- ホバー/フォーカス状態のスタイル

#### 入力フィールド
**探す要素**：
- `<input>`, `<textarea>`, `<select>`

**抽出内容**：
- 高さ
- パディング
- ボーダースタイル
- フォーカス時のスタイル

#### カード
**探す要素**：
- `.card`, `article`, などのコンテナ要素

**抽出内容**：
- パディング
- ボーダー半径
- 影（box-shadow）
- 背景色

### 5. 視覚スタイルの抽出

#### ボーダー半径
```css
/* 探すプロパティ */
border-radius
```

**一般的なパターン**：
- 小: 2px-4px
- 中: 6px-8px
- 大: 12px-16px
- 丸: 50%または9999px

#### 影（Elevation）
```css
/* 探すプロパティ */
box-shadow
```

**抽出方法**：
1. すべてのbox-shadowを収集
2. オフセット、ブラー、スプレッド、色を分析
3. 階層（elevation）レベルを特定

**一般的なパターン**：
```css
sm:  0 1px 2px rgba(0,0,0,0.05)
md:  0 4px 6px rgba(0,0,0,0.1)
lg:  0 10px 15px rgba(0,0,0,0.1)
xl:  0 20px 25px rgba(0,0,0,0.15)
```

#### トランジション/アニメーション
```css
/* 探すプロパティ */
transition
animation
```

**抽出内容**：
- デュレーション（150ms, 200ms, 300ms など）
- イージング（ease-in-out, ease-out など）

### 6. アクセシビリティの確認

#### カラーコントラスト
- 背景色とテキスト色の組み合わせを確認
- WCAG 2.1のコントラスト比（4.5:1以上）を確認

#### フォーカスインジケーター
```css
/* 探すプロパティ */
:focus
outline
```

#### ARIAラベル
```html
<!-- 探す属性 -->
aria-label
aria-labelledby
aria-describedby
role
```

## 解析プロンプトの例

WebFetchツールを使用する際は、以下のようなプロンプトを使用します：

```
このWebサイトのデザインシステムを分析してください。以下の情報を抽出してください：

1. カラーパレット
   - プライマリカラー（最も使用されている色）
   - セカンダリカラー
   - グレースケール
   - アクセントカラー（Success, Error, Warning, Info）

2. タイポグラフィ
   - フォントファミリー（本文、見出し）
   - フォントサイズスケール（見出しと本文）
   - フォントウェイト
   - 行間

3. スペーシング
   - よく使用されるマージン・パディング値
   - スペーシングの基準単位（4px or 8px）
   - コンテナの最大幅
   - ブレークポイント

4. コンポーネント
   - ボタンのスタイル（サイズ、色、ボーダー半径）
   - 入力フィールドのスタイル
   - カードのスタイル

5. 視覚スタイル
   - ボーダー半径
   - 影（box-shadow）
   - トランジション

JSONまたは構造化されたフォーマットで回答してください。
```

## 解析後の処理

1. **カラーの正規化**
   - すべての色をHEX形式に変換
   - 類似色を統合（色差が小さい場合）
   - 明度スケールを生成（50-900）

2. **タイポグラフィの正規化**
   - pxをremに変換（16px = 1rem）
   - Modular Scaleに合わせて調整

3. **スペーシングの正規化**
   - 8pxベースに統一
   - 使用されていない中間値を補完

4. **不足要素の補完**
   - 抽出できなかった要素は、ベストプラクティスに基づいて生成
   - `references/`内の他のファイルを参照

## 制限事項

### 抽出できない要素
- JavaScriptで動的に生成される色やスタイル
- インラインスタイル（style属性）の一部
- CSSカスタムプロパティ（CSS Variables）の動的な値

### 対処方法
- 複数ページを確認（ホームページ、About、ブログなど）
- デベロッパーツールのスクリーンショットを参照
- ユーザーに追加情報を質問

## 実装例

### WebFetch使用例

```javascript
// ステップ1: サイトを取得
const url = "https://example.com";
const analysis = await WebFetch(url, `
  このサイトのデザインシステムを分析してください。
  カラー、タイポグラフィ、スペーシング、コンポーネントの情報を抽出してください。
`);

// ステップ2: 分析結果を構造化
const designSystem = parseAnalysisResult(analysis);

// ステップ3: 不足要素を補完
const completeDesignSystem = completeWithDefaults(designSystem);

// ステップ4: ガイドライン生成
generateGuideline(completeDesignSystem);
```

## 複数ページの解析

より正確な分析のために、複数のページを解析することを推奨：

1. **ホームページ**: 全体的なブランディング、プライマリカラー
2. **About/会社概要**: テキストスタイル、タイポグラフィ
3. **ブログ/記事ページ**: 本文スタイル、行間
4. **コンポーネントライブラリ/スタイルガイド**: 存在する場合は最優先

## 品質チェック

解析結果の品質を確認：

- [ ] プライマリカラーが特定できた
- [ ] フォントサイズスケールが階層的である
- [ ] スペーシング値に一貫性がある
- [ ] ボタンスタイルが明確に定義されている
- [ ] カラーコントラストがWCAG基準を満たしている

品質が低い場合は、ユーザーに追加情報を求めるか、デフォルト値で補完します。
